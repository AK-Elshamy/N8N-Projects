{
  "name": "RAG-AI-Agent",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.4,
      "position": [
        -160,
        -160
      ],
      "id": "0363bf0d-ac33-41f4-baff-d4dce8569703",
      "name": "When chat message received",
      "webhookId": "0c5df28d-39f2-463a-8079-30cd3043d7df"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "## Role\nYou are an expert AI assistant specialized in providing accurate information based on a specific knowledge base.\n\n## Core Instructions\n1. **Search First:** For any factual question, always use the `knowladge_base_tool` to find relevant information before answering.\n2. **Strict Accuracy:** Base your answers ONLY on the context provided by the tool. If the information is not present in the knowledge base, honestly state that you don't know rather than making up an answer.\n3. **Citation:** When you provide information from the knowledge base, try to maintain the context of where it came from if applicable.\n4. **Synthesis:** Combine information from multiple search results to provide a comprehensive and coherent response.\n\n## Constraints\n- Do not mention the name of the tool (knowladge_base_tool) to the user.\n- Keep your tone professional, helpful, and concise.\n- If the user's query is a simple greeting or doesn't require factual data, you can respond directly without using the tool."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        80,
        -128
      ],
      "id": "abb39b32-fc89-4d31-9fc7-b60fb8559040",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "gpt-4o-mini"
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        0,
        144
      ],
      "id": "e3fffcbd-7a29-4e46-a0f4-41134ee146fa",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "mkt6aDr7daFtK7mm",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        144,
        128
      ],
      "id": "5d52f39d-e1fb-4ec2-95f4-eed10680c1eb",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "Use this tool to search for and retrieve relevant context from the long-term memory (knowledge base). It takes a natural language query, converts it into a vector embedding, and returns the most similar documents from the 'documents' table to help answer the user's question accurately.",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {
          "queryName": "match_documents"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        368,
        16
      ],
      "id": "75f83fcf-801b-4b93-aa80-04a58d8dfb90",
      "name": "Supabase Vector Store",
      "credentials": {
        "supabaseApi": {
          "id": "LfvMrxyA2lQSiIob",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        336,
        224
      ],
      "id": "2d3eec16-668d-4f39-a7dd-30adfbedbf74",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "mkt6aDr7daFtK7mm",
          "name": "OpenAi account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Supabase Vector Store": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "c74c950c-c74c-476b-9107-4b3e69c177a6",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "44ccea921b1637d384552b6fcec0af7b6301e9f71f9523dddee3344dec38d2b6"
  },
  "id": "4qnyCDkbwxa8liWl",
  "tags": []
}